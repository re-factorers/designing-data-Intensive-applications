# 01. 신뢰할 수 있고 확장 가능하며 유지보수하기 쉬운 애플리케이션

요즘 애플리케이션은 데이터 중심적이다.

## 1. 신뢰성

신뢰성이란?
무언가 잘못되더라도 지속적으로 올바르게 동작함

내결함성(또는 탄력성)이란?
특정 유형의 결함을 예측하고 대처할 수 있는 시스템

신뢰성을 높이기 위해 여러 유형의 결함에 대해 파악하여 예측하고 대처할 수 있는 시스템을 구축해야한다.

> 넷플릭스 카오스 몽키(Chaos Monkey)

### 하드웨어 결함

하드디스크, 램 등의 결함, 대규모 정전 사태 등 이 같은 하드웨어 결함에 의해 시스템 장애가 발생할 수 있다.
시스템 장애율을 줄이기 위해 중복(redundancy)을 추가하는 방법이 일반적이다.

최근 클라우드 플랫폼은 단일 장비 신뢰성보다 유연성과 탄력성을 우선적으로 처리한다. 따라서 소프트웨어 내결함성 기술을 사용하거나 하드웨어 중복성을 추가해 전체 장비의 손실을 견딜 수 있는 시스템으로 점점 옮겨가고 있다.

### 소프트웨어 오류

시스템 내 체계적 오류(systematic error)는 예상하기 어려운 결함이다.

소프트웨어의 체계적 오류 문제는 신속한 해결책이 없고, 시스템의 가정과 상호작용에 대해 주의 깊게 생각하기, 빈틈없는 테스트, 프로세스 격리, 죽은 프로세스의 재시작 허용, 프로덕션 환경에서 시스템 동작의 측정, 모니터링, 분석하기 등이 문제 해결에 도움을 줄 수 있다.

### 인적 오류

사람이 소프트웨어 시스템을 설계하고 구축하며, 운영자로서 시스템을 운영하므로 인적 오류는 항상 발생한다. 반면 하드웨어 결함은 중단 원인의 10~25% 정도이다.

아래의 접근 방식으로 인적 오류를 줄임으로서 신뢰성을 높일 수 있다.

- 오류의 가능성을 최소화하는 방향으로 시스템을 설계하라. (추상화 등)
- 사람이 가장 많이 실수하는 장소에서 실수로 장애가 발생할 수 있는 부분을 분리하라.
- 철저하게 테스트하라.
- 인적 오류를 쉽게 복구할 수 있게 하라.
- 모니터링 대책을 마련하라.
- 조작 교육과 실습을 시행하라.

## 2. 확장성

확장성이란?
증가한 부하에 대처하는 시스템 능력을 말한다.

시스템이 현재 안정적이라고 해도, 부하 증가 등의 원인으로 안정성이 떨어질 수 있으므로 확장성이 중요하다.

### 부하 기술하기

시스템의 현재 부하를 간결하게 기술하여 부하 성장 질문을 논의해야한다.

부하는 부하 매개변수(load parameter)라 부르는 몇 개의 숫자로 나타낼 수 있는데, 이는 시스템 설계에 따라 달라진다.

웹 서버의 초당 요청 수, 데이터베이스의 읽기 대 쓰기 비율, 대화방의 동시 활성 사용자, 캐시 적종률 등이 될 수 있다.
평균적인 경우가 중요할 수도 있고 소수의 극단적인 경우가 병목 현상의 원인일 수도 있다.

> 트위터의 두 가지 접근 방식

### 성능 기술하기

시스템 부하를 기술하면, 부하 매개변수를 증가시켰을 때 시스템이 어떤 영향을 받을지 조사할 수 있다.

시스템 성능 수치는 처리량, 응답 시간 등이 있는데, 온라인 시스템에서는 서비스의 응답 시간이 매우 중요하다.

클라이언트의 동일한 요청에도 응답 시간은 매번 다른데, 여러 변수에 의해 응답 시간은 많이 변하게 된다.

전형적인 응답 시간을 알고 싶다면, 평균보다는 백분위를 사용하는 편이 낫다.

### 부하 대응 접근 방식

## 3. 유지보수성

소프트웨어의 비용 대부분은 유지보수에 들어간다.
유지보수를 최대한 적게 하기 위해 아래의 원칙을 지키며 소프트웨어 시스템 설계를 해야 한다.

- 운용성
  - 운영팀이 시스템을 원활하게 운영할 수 있게 쉽게 만들어라
- 단순성
  - 시스템에서 복잡도를 최대한 제거하라
- 발전성
  - 엔지니어가 이후에 시스템을 쉽게 변경할 수 있게 하라

### 운용성: 운영의 편리함 만들기

시스템이 지속해서 원활하게 작동하려면 운영팀이 필수다.
동일하게 반복되는 태스크를 쉽게 수행하게끔 운영해야한다.

### 단순성: 복잡도 관리

우발적 복잡도(accidental complexity)를 줄임으로서 시스템을 단순하게 만들 수 있다.
우발적 복잡도를 제거하기 위한 최상의 도구는 추상화다.
좋은 추상화는 깔끔하고 직관적인 외관 아래로 많은 세부 구현을 숨길 수 있다.
하지만 좋은 추상화를 찾기는 어렵다.

### 발전성: 변화를 쉽게 만들기

데이터 시스템 변경을 쉽게 하고 변화된 요구사항에 시스템을 맞추는 방법 역시 시스템의 간단함과 추상화가 필요하다.

## 정리

애플리케이션이 유용하려면 다양한 요구사항을 충족시켜야 한다.
그 요구사항에는 기능적 요구 사항, 비기능적 요구사항이 있는데, 비기능적 요구사항 중 신뢰성, 확장성, 유지보수성의 중요성에 대해 살펴보았다.

이러한 비기능적 요구사항을 충족하면 좋은 애플리케이션이 되겠지만, 쉽게 충족하기는 어렵다.
